{% extends 'Layout.html' %}
{% block content %}
	<article class="relative h-44 sm:h-72 mb-32">
		<img class="w-full h-full object-cover" src="./public/img/misc/index/bg_index.jpg" alt="Bannière du site." />

		<div class="absolute top-[60%] sm:top-[80%] left-[6%] flex flex-row justify-between items-center gap-x-6">
			<img class="block w-32 h-32 object-cover rounded-full" src="./public/img/misc/profile_picture.jpg" alt="Ma photo de profil." />
			<p class="sm:text-xl font-semibold mt-8">
				Kévin BENTO (@_kevin1026__)
			</p>
		</div>
	</article>

	<article>
		<div class="ml-4">
			<hr class="w-6 border-teal-600 border-solid border-2" />
			<h2 class="text-3xl font-semibold underline mb-10 dark:text-teal-300">À propos de moi</h2>
		</div>

		<div class="grid grid-cols-4 grid-rows-1 gap-x-4">
			{% for tab in tabs %}
				<div onclick="openAboutTab(event, {{ tab['param'] }});">
					<p>
						{{ tab['name'] }}
					</p>
				</div>
			{% endfor %}
		</div>
	</article>

	<article>
		{% for tab in tabs %}
			<div class="hidden" id="{{ tab['param'] }}"></div>
		{% endfor %}
	</article>
{% endblock %}

{% block js %}
	<script>
		const openAboutTab = (e, tabName) => {
			let i, tabcontent, tablink;

			tabcontent = document.querySelectorAll('.tabcontent');
			for (i = 0; i < tabcontent.length; i++) {
				tabcontent[i].style.display = 'none';
			}

			tablinks = document.querySelectorAll('.tablinks');
			for (i = 0; i < tablinks.length; i++) {
				tablinks[i].className = tablinks[i].className.replace('active', '');
			}

			console.log(tabName);
			document.getElementById(tabName).style.display = 'block';
			event.currentTarget.className += " active";

			var tabData = new FormData();
			tabData.append('tab', tabName);

			fetch('/about/?action=getTab', {
				method: 'POST',
				body: tabData,
				cache: 'default',
				mode: 'cors',
				headers: fetchHeaders
			})
			.then(function(res) {
				return res.text();
			})
			.then(function(html) {
				document.getElementById(tabName).innerHTML = html;
			});
		}
	</script>
{% endblock %}